<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>四型心理測驗</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial; max-width: 700px; margin: auto; padding: 20px; line-height: 1.7; }
.option { width: 100%; padding: 12px; margin: 8px 0; border-radius: 6px; background: #eee; border: none; cursor: pointer; }
.option:hover { background: #ccc; }
#result { display: none; margin-top: 30px; }
.card { background: #f8f8f8; padding: 20px; border-radius: 10px; margin-top: 20px; }
</style>
</head>

<body>

<h2>四型心理測驗</h2>
<div id="question-box">
    <h3 id="question"></h3>
    <div id="options"></div>
</div>

<div id="result">
    <h2>你的結果</h2>
    <canvas id="radar"></canvas>
    <div id="finalType" class="card"></div>
    <div id="analysis" class="card"></div>
</div>

<script>
const questions = [
    {
        text: "1. 當你遇到一個新的挑戰時，你的第一反應是：",
        options: [
            { text: "（A） 馬上跳進去、先試看看", type: "馬" },
            { text: "（B） 先觀察環境、研究方式", type: "男孩" },
            { text: "（C） 有點猶豫、怕搞砸、先做部分準備", type: "狐狸" },
            { text: "（D） 幫助他人，在背後支撐或配合", type: "鼴鼠" }
        ]
    },
    {
        text: "2. 在朋友情緒低落時，你通常會：",
        options: [
            { text: "（A） 鼓勵他們「快起來、一起去做點什麼」", type: "馬" },
            { text: "（B） 安靜陪伴、傾聽他們説出來", type: "男孩" },
            { text: "（C） 不太確定怎麼幫比較好，會退縮", type: "狐狸" },
            { text: "（D） 主動照顧他們、給支持", type: "鼴鼠" }
        ]
    },
    {
        text: "3. 在思考人生方向時，你偏好：",
        options: [
            { text: "（A） 設定目標、立刻實踐", type: "馬" },
            { text: "（B） 深入思考、分析可能性", type: "男孩" },
            { text: "（C） 小心翼翼、怕錯、慢慢走", type: "狐狸" },
            { text: "（D） 與他人分享、互相支持", type: "鼴鼠" }
        ]
    },
    {
        text: "4. 面對失敗，你最可能的反應是：",
        options: [
            { text: "（A） 立刻反彈、再戰一次", type: "馬" },
            { text: "（B） 自我反省、思考教訓", type: "男孩" },
            { text: "（C） 沮喪、退縮、怕再犯錯", type: "狐狸" },
            { text: "（D） 尋求人際支持、一起面對", type: "鼴鼠" }
        ]
    },
    {
        text: "5. 你最看重的特質是：",
        options: [
            { text: "（A） 冒險精神／行動力", type: "馬" },
            { text: "（B） 思考深度／內在探索", type: "男孩" },
            { text: "（C） 謹慎／安全感", type: "狐狸" },
            { text: "（D） 溫暖／支持他人", type: "鼴鼠" }
        ]
    }
];

let index = 0;
let score = { 馬: 0, 男孩: 0, 狐狸: 0, 鼴鼠: 0 };

function loadQ() {
    const q = questions[index];
    document.getElementById("question").innerText = q.text;
    document.getElementById("options").innerHTML = q.options
        .map(o => `<button class="option" onclick="choose('${o.type}')">${o.text}</button>`)
        .join("");
}

loadQ();

function choose(type) {
    score[type]++;
    index++;
    if (index < questions.length) loadQ();
    else finish();
}

function finish() {
    document.getElementById("question-box").style.display = "none";
    document.getElementById("result").style.display = "block";

    // 雷達圖
    new Chart(document.getElementById("radar"), {
        type: 'radar',
        data: {
            labels: ["馬", "男孩", "狐狸", "鼴鼠"],
            datasets: [{
                label: "你的特質分佈",
                data: [score.馬, score.男孩, score.狐狸, score.鼴鼠],
                borderWidth: 2,
                fill: true
            }]
        }
    });

    // 主要類型判定
    let entries = Object.entries(score);
    entries.sort((a,b)=>b[1]-a[1]);
    let top = entries.filter(e => e[1] === entries[0][1]).map(e=>e[0]);

    document.getElementById("finalType").innerHTML = `
        <h3>你的類型：${top.join("＋")}</h3>
    `;

    // 完整解析（你原本提供的）
    const detail = {
        男孩: `你是【男孩型】：
關於自己，你還在學著怎麼相信。
你有很強的感受力，對世界充滿好奇，也對自己充滿問號…（完整原文放在這裏）`,

        鼴鼠: `你是【鼴鼠型】：
你的溫柔，是世界很需要的安慰。
你很重視「舒服感」——食物、氣氛、陪伴…（完整原文放在這裏）`,

        狐狸: `你是【狐狸型】：
你看得很清楚，只是習慣把心收好。
你敏銳、細心，對人的真心假意有直覺…（完整原文放在這裏）`,

        馬: `你是【馬型】：
你習慣當那個「載大家走過去」的人。
你很習慣扛責任、撐住場面…（完整原文放在這裏）`
    };

    document.getElementById("analysis").innerHTML =
        top.map(t => `<h3>${t}型解析</h3><p>${detail[t]}</p>`).join("");
}
</script>
</body>
</html>
